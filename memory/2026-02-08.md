# 2026-02-08 — Amazon SP-API Setup & Security Protocol

## Major Progress

### Amazon SP-API Connected ✅
- Received credentials from Ramon (Client ID, Client Secret, Refresh Token)
- Tested connection — working for US, CA, MX, BR (only using US & CA)
- Created data infrastructure at `~/amazon-data/`

### Reports Downloaded ✅
Successfully pulled supply chain reports:
- FBA Inventory US (226 products)
- FBA Inventory CA (289 products)
- Restock Recommendations US (220 products)
- Restock Recommendations CA (284 products)
- Orders US - 30 days (1,551 orders)

Key columns for supply chain:
- **Inventory:** asin, afn-fulfillable-quantity, afn-inbound-working/shipped/receiving-quantity
- **Restock:** ASIN, Units Sold Last 30 Days, Available, Inbound, Recommended Ship Qty

### Email Capability Added ✅
- Set up Gmail SMTP for chloemercer32@gmail.com
- App password configured
- Sent first reports to ramon@goven.com successfully
- Utility: `~/amazon-data/collectors/email_util.py`

### Security Protocol Implemented ✅
**Master password protection for all credentials**

- Password hash stored in `security/credentials_protection.json`
- Hint: "gnome"
- Rules added to AGENTS.md
- Full protocol: `security/SECURITY_PROTOCOL.md`

**Behavior:**
1. Any request for API keys, passwords, tokens → require master password
2. Wrong password → 1 more attempt
3. 2 failures → stop responding, email ramon@goven.com

## Files Created/Modified

```
~/amazon-data/
├── .env                    ← SP-API + email credentials
├── .gitignore
├── amazon.db               ← SQLite database
├── collectors/
│   ├── sp_api_client.py    ← Shared API utilities
│   ├── email_util.py       ← Email sending
│   ├── fetch_supply_chain_reports.py
│   └── ...
├── reports/                ← Downloaded TSV files
└── docs/
    └── SP-API-SETUP-GUIDE.md

~/.openclaw/workspace/
├── security/
│   ├── credentials_protection.json  ← Password hash
│   └── SECURITY_PROTOCOL.md
├── AGENTS.md               ← Updated with security rules
└── TOOLS.md                ← Updated with email & API info
```

## Next Steps
- Ramon reviewing report format
- Will advise on data structure for database storage
- Eventually: automate daily/weekly report pulls

## Key Learnings
- Amazon reports can take 1-5 minutes to generate
- Some report types fail (FATAL) — may need alternative approaches
- Reports use cp1252 encoding, not UTF-8
- GET_FBA_MYI_ALL_INVENTORY_DATA works better than GET_FBA_MYI_UNSUPPRESSED_INVENTORY_DATA
